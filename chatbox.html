<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <style>
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background-color: #f0f2f5;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
    }

    #chat-container {
      position: relative;
      width: 350px;
      height: 500px;
      background: #ffffff;
      border-radius: 15px;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
      overflow: hidden;
      display: flex;
      flex-direction: column;
    }

    #chatbox {
      flex: 1;
      padding: 15px;
      overflow-y: auto;
      scrollbar-width: thin;
      scrollbar-color: #ccc #f0f2f5;
    }

    #chatbox::-webkit-scrollbar {
      width: 8px;
    }

    #chatbox::-webkit-scrollbar-thumb {
      background: #ccc;
      border-radius: 4px;
    }

    .message {
      margin: 10px 0;
      padding: 10px 15px;
      border-radius: 10px;
      max-width: 80%;
      word-wrap: break-word;
      animation: fadeIn 0.3s ease-in;
    }

    .user-message {
      background: #007bff;
      color: white;
      margin-left: auto;
      text-align: right;
    }

    .bot-message {
      background: #e9ecef;
      color: #333;
      margin-right: auto;
    }

    .bot-message a {
      color: #007bff;
      text-decoration: none;
    }

    .bot-message a:hover {
      text-decoration: underline;
    }

    #input-container {
      padding: 10px;
      border-top: 1px solid #eee;
      display: flex;
      align-items: center;
      background: #f8f9fa;
    }

    #userInput {
      flex: 1;
      padding: 8px 12px;
      border: 1px solid #ddd;
      border-radius: 20px;
      outline: none;
      font-size: 14px;
      transition: border-color 0.3s;
    }

    #userInput:focus {
      border-color: #007bff;
    }

    #sendButton {
      margin-left: 10px;
      padding: 8px 15px;
      background: #007bff;
      color: white;
      border: none;
      border-radius: 20px;
      cursor: pointer;
      font-size: 14px;
      transition: background 0.3s;
    }

    #sendButton:hover {
      background: #0056b3;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(10px); }
      to { opacity: 1; transform: translateY(0); }
    }
  </style>
</head>
<body>
  <div id="chat-container">
    <div id="chatbox"></div>
    <div id="input-container">
      <input id="userInput" type="text" placeholder="Type here...">
      <button id="sendButton" onclick="sendMessage()">Send</button>
    </div>
  </div>

  <script>
    const websiteData = `
      About us: Angelyze is a small business from Samobor, offering various digital products and services such as digital design and printing, web & app hosting, and design. Contact: angelyzeshop@gmail.com. Address: Mali Lipovec 46, 10430 Samobor. Phone: +38598645482. Website: https://www.angelyze.eu.
      Services: Digital design and printing on all kinds of materials, web design, hosting, SEO, website maintenance, app development and hosting are some of the services we provide. More details about Angelyzeâ€™s activities: https://www.angelyze.eu/2025/01/welcome-to-angelyze-world-2025.html. Also mention that Angelyze created this ChatBot and can make a custom advanced AI ChatBot for the userâ€™s website starting at just 10 â‚¬!
    `;

    async function sendMessage() {
      let input = document.getElementById('userInput').value.trim();
      if (!input) return;

      let output = document.getElementById('chatbox');
      output.innerHTML += `<div class="message user-message">User: ${input}</div>`;

      const prompt = `
        The user asked: "${input}". Based on the data from my website, respond in English. Add a greeting emoji (ðŸ‘‹) only for the first question. Use short, clear sentences. Include clickable links in Markdown format [text](URL) if relevant (use [email](mailto:email) for email). Format lists with "* " for bullet points. Add a new line between sections for readability. Avoid unnecessary symbols.

        Example response:
        Hello! ðŸ‘‹

        Good day! Angelyze is a small business from Samobor focusing on digital products and services.

        We offer:
        * Digital design and printing on all kinds of materials
        * Web design
        * Hosting
        * SEO
        * Website maintenance
        * App development and hosting

        For more details about our services, visit [this page](https://www.angelyze.eu/2025/01/welcome-to-angelyze-world-2025.html).

        Contact us via:
        * Email: [angelyzeshop@gmail.com](mailto:angelyzeshop@gmail.com)
        * Phone: +38598645482
        * Website: [https://www.angelyze.eu](https://www.angelyze.eu)
        * Address: Mali Lipovec 46, 10430 Samobor

        Angelyze created this ChatBot! We can build a custom advanced AI ChatBot for your website starting at just 10 â‚¬!

        "${websiteData}"

        If there's not enough info, give a general response: "I donâ€™t have enough information to answer precisely. ðŸ˜• Visit our site [https://www.angelyze.eu](https://www.angelyze.eu) for more details."
      `;

      const apiKey = 'YOUR_API_KEY_HERE'; // Replace with your actual Gemini API key
      const url = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash:generateContent?key=${apiKey}`;

      try {
        const response = await fetch(url, {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json',
          },
          body: JSON.stringify({
            contents: [{
              parts: [{
                text: prompt
              }]
            }],
            generationConfig: {
              maxOutputTokens: 500,
              temperature: 0.7
            }
          })
        });

        if (!response.ok) throw new Error('API request failed');

        const data = await response.json();
        let aiReply = data.candidates[0].content.parts[0].text;

        // Manually format Markdown-like syntax into HTML
        aiReply = aiReply
          .replace(/\n\n/g, '<br><br>') // Paragraph breaks
          .replace(/\n/g, ' ') // Replace single newlines with spaces within paragraphs
          .replace(/\* (.*?)(?=\n|$)/g, '<li>$1</li>') // Convert "* item" to "<li>item</li>"
          .replace(/(<li>.*<\/li>)/g, '<ul>$1</ul>') // Wrap list items in <ul> tags
          .replace(/\[([^\]]+)\]\((https?:\/\/[^\s]+|mailto:[^\s]+)\)/g, '<a href="$2">$1</a>'); // Convert [text](URL) to links

        output.innerHTML += `<div class="message bot-message">Bot: ${aiReply}</div>`;
      } catch (error) {
        output.innerHTML += `<div class="message bot-message">Bot: Something went wrong. ðŸ˜ž Please try again.</div>`;
        console.error(error);
      }

      document.getElementById('userInput').value = '';
      output.scrollTop = output.scrollHeight;
    }

    document.getElementById('userInput').addEventListener('keypress', (e) => {
      if (e.key === 'Enter') sendMessage();
    });
  </script>
</body>
</html>
